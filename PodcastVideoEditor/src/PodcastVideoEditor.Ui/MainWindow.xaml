<Window x:Class="PodcastVideoEditor.Ui.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:PodcastVideoEditor.Ui.Controls"
        xmlns:views="clr-namespace:PodcastVideoEditor.Ui.Views"
        Title="Podcast Video Editor" Height="720" Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E1E"
        Foreground="#FFFFFF"
        Loaded="MainWindow_Loaded"
        Closing="MainWindow_Closing">
    <DockPanel>
        <Menu DockPanel.Dock="Top" Background="#252526" Foreground="#FFFFFF">
            <MenuItem Header="File">
                <MenuItem Header="New Project" Click="NewProjectButton_Click" />
                <MenuItem Header="Open Selected" Click="OpenSelectedMenu_Click" />
                <Separator />
                <MenuItem Header="Exit" Click="ExitMenu_Click" />
            </MenuItem>
            <MenuItem Header="Edit">
                <MenuItem Header="Settings" Click="SettingsMenu_Click" />
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="About" Click="AboutMenu_Click" />
            </MenuItem>
        </Menu>

        <TabControl x:Name="MainTabControl" Background="#1E1E1E" Foreground="#FFFFFF">
            <TabItem Header="Home" DataContext="{Binding ProjectViewModel}">
                <ScrollViewer>
                    <StackPanel Margin="20">
                        <TextBlock Text="Welcome to Podcast Video Editor" FontSize="22" FontWeight="Bold" Foreground="#007ACC" />
                        <TextBlock Text="Create a new project or open a recent one." Margin="0,6,0,20" Foreground="#CCCCCC" />

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                            <Button Content="New Project" Width="130" Height="36" Margin="0,0,10,0"
                                    Background="#28A745" Foreground="#FFFFFF" BorderThickness="0"
                                    Click="NewProjectButton_Click" />
                            <Button Content="Open Selected" Width="130" Height="36" Margin="0,0,10,0"
                                    Background="#007ACC" Foreground="#FFFFFF" BorderThickness="0"
                                    Command="{Binding OpenProjectCommand}" CommandParameter="{Binding CurrentProject}" />
                            <Button Content="Delete Selected" Width="130" Height="36" Margin="0,0,10,0"
                                    Background="#D13438" Foreground="#FFFFFF" BorderThickness="0"
                                    Command="{Binding DeleteProjectCommand}" CommandParameter="{Binding CurrentProject}" />
                            <Button Content="Refresh" Width="100" Height="36"
                                    Background="#3E3E42" Foreground="#FFFFFF" BorderThickness="0"
                                    Command="{Binding LoadProjectsCommand}" />
                        </StackPanel>

                        <Border Background="#252526" BorderBrush="#3E3E42" BorderThickness="1" Padding="10">
                            <StackPanel>
                                <TextBlock Text="Recent Projects" FontSize="14" FontWeight="Bold" Margin="0,0,0,10" />
                                <ListBox ItemsSource="{Binding Projects}" SelectedItem="{Binding CurrentProject, Mode=TwoWay}" Height="240"
                                         Background="#1E1E1E" Foreground="#FFFFFF" BorderThickness="0">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="0,4">
                                                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                                                <TextBlock Text="{Binding AudioPath}" FontSize="11" Foreground="#AAAAAA" TextTrimming="CharacterEllipsis" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                        </Border>

                        <StackPanel Margin="0,15,0,0">
                            <TextBlock Text="Status" FontWeight="Bold" Margin="0,0,0,6" />
                            <Border Background="#252526" BorderBrush="#3E3E42" BorderThickness="1" Padding="10">
                                <TextBlock Text="{Binding StatusMessage}" TextWrapping="Wrap" />
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Editor">
                <ScrollViewer>
                    <Grid Margin="20">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="20" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <Border Background="#252526" BorderBrush="#3E3E42" BorderThickness="1" Padding="10">
                            <controls:AudioPlayerControl x:Name="AudioPlayerControl" />
                        </Border>

                        <Border Grid.Row="2" Background="#252526" BorderBrush="#3E3E42" BorderThickness="1" Padding="10">
                            <views:RenderView DataContext="{Binding RenderViewModel}" />
                        </Border>
                    </Grid>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Settings">
                <ScrollViewer>
                    <StackPanel Margin="20">
                        <TextBlock Text="Settings" FontSize="22" FontWeight="Bold" Foreground="#007ACC" />
                        <TextBlock Text="Configure FFmpeg and application paths." Margin="0,6,0,20" Foreground="#CCCCCC" />

                        <TextBlock Text="FFmpeg Path" Margin="0,0,0,6" />
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="FFmpegPathTextBox" Grid.Column="0" Height="32" Padding="8"
                                     Background="#252526" Foreground="#FFFFFF" BorderBrush="#3E3E42" BorderThickness="1" />
                            <Button Grid.Column="1" Width="90" Height="32" Margin="10,0,0,0" Content="Browse"
                                    Background="#3E3E42" Foreground="#FFFFFF" BorderThickness="0" Click="BrowseFFmpeg_Click" />
                            <Button Grid.Column="2" Width="90" Height="32" Margin="10,0,0,0" Content="Validate"
                                    Background="#007ACC" Foreground="#FFFFFF" BorderThickness="0" Click="ValidateFFmpeg_Click" />
                        </Grid>

                        <TextBlock x:Name="FFmpegStatusText" Foreground="#CCCCCC" Margin="0,0,0,20" TextWrapping="Wrap" />

                        <TextBlock Text="App Data Path" Margin="0,0,0,6" />
                        <TextBox x:Name="AppDataPathText" Height="32" Padding="8" IsReadOnly="True"
                                 Background="#252526" Foreground="#FFFFFF" BorderBrush="#3E3E42" BorderThickness="1" />

                        <StackPanel Margin="0,20,0,0">
                            <TextBlock Text="About" FontSize="16" FontWeight="Bold" Margin="0,0,0,6" />
                            <TextBlock Text="Podcast Video Editor - Phase 1" Foreground="#CCCCCC" />
                            <TextBlock Text="Built with .NET 8 WPF" Foreground="#AAAAAA" />
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </DockPanel>
</Window>
