<UserControl x:Class="PodcastVideoEditor.Ui.Views.ElementsMediaPanelView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#1e1e1e"
             Foreground="#e0e0e0">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="8">
            <TextBlock Text="Elements / Media" FontSize="14" FontWeight="Bold" Foreground="#64b5f6" Margin="0,0,0,10"/>

            <!-- Script -->
            <Expander Header="Script (dán định dạng [start → end] text)" IsExpanded="False"
                      Background="#2d2d2d" Foreground="#e0e0e0" Margin="0,0,0,10">
                <StackPanel Margin="8">
                    <TextBox Text="{Binding TimelineViewModel.ScriptPasteText, UpdateSourceTrigger=PropertyChanged}"
                             Background="#1e1e1e" Foreground="#e0e0e0" Padding="8,6"
                             BorderBrush="#546e7a" BorderThickness="1"
                             TextWrapping="Wrap" AcceptsReturn="True" Height="100" VerticalScrollBarVisibility="Auto"
                             VerticalContentAlignment="Top"
                             ToolTip="Ví dụ: [0.00 → 6.04]  Chào mừng đến với podcast..."/>
                    <Button Content="Áp dụng script" Command="{Binding TimelineViewModel.ApplyScriptCommand}"
                            HorizontalAlignment="Left" Margin="0,8,0,0"
                            Background="#43a047" Foreground="White" Padding="12,8" MinHeight="32"/>
                </StackPanel>
            </Expander>

            <!-- Media (project assets) -->
            <TextBlock Text="Media" FontSize="12" FontWeight="SemiBold" Foreground="#b0bec5" Margin="0,4,0,6"/>
            <ItemsControl x:Name="MediaList" ItemsSource="{Binding ProjectViewModel.CurrentProject.Assets}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#2d2d2d" BorderBrush="#546e7a" BorderThickness="1" Padding="8" Margin="0,0,0,6">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" Foreground="#e0e0e0" TextTrimming="CharacterEllipsis" MaxWidth="220"/>
                                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,6,0,0">
                                    <Button Content="Thêm vào timeline"
                                            Command="{Binding DataContext.TimelineViewModel.AddSegmentWithAssetCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding}"
                                            Background="#43a047" Foreground="White" Padding="8,4" FontSize="11" Cursor="Hand"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </ScrollViewer>
</UserControl>
